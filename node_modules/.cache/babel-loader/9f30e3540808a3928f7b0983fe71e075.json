{"ast":null,"code":"import _defineProperty from \"/Users/volpito/Desktop/projets/PALO_IT_test/palo_it_mrigot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/volpito/Desktop/projets/PALO_IT_test/palo_it_mrigot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/volpito/Desktop/projets/PALO_IT_test/palo_it_mrigot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/volpito/Desktop/projets/PALO_IT_test/palo_it_mrigot/app/javascript/components/Exo1/Zone1.js\";\nimport React, { useRef, useState, useEffect } from 'react';\nimport Zone2 from './Zone2';\nimport uuid from 'uuid/v4';\nimport Zone3 from '../Exo3/Zone3';\nimport Parse from '../TinyArythmeticExpressionParser/TinyArythmeticExpressionParser';\n\nfunction Zone1() {\n  var _React$createElement, _React$createElement2, _React$createElement3, _React$createElement4, _React$createElement5, _React$createElement6, _React$createElement7, _React$createElement8, _React$createElement9, _React$createElement10, _React$createElement11, _React$createElement12, _React$createElement13;\n\n  var cityRef = useRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      cityList = _useState2[0],\n      setCityList = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchId = _useState4[0],\n      setSearchId = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      products = _useState6[0],\n      setProducts = _useState6[1];\n\n  useEffect(function () {\n    fetch(\"/products\", {\n      method: 'get'\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      setProducts(data.products);\n    })[\"catch\"](function () {\n      console.log(\"error fetch zone 1\");\n    });\n  }, []);\n\n  function handleClick() {\n    var cityName = cityRef.current.value;\n    if (cityName === '') return;\n    cityName = cityName.toLowerCase().split(' ');\n    cityName = cityName.filter(function (a) {\n      return a == 'lyon' || a == 'paris' || a == 'marseille' || a == 'toulouse' || a == 'lille';\n    });\n    cityName = cityName.map(function (a, i) {\n      setCityList(function (prevCity) {\n        return [].concat(_toConsumableArray(prevCity), [{\n          id: {\n            uuid: uuid\n          },\n          name: a\n        }]);\n      });\n    });\n    cityRef.current.value = null;\n  }\n\n  function handleSearch(city) {\n    products.filter(function (a) {\n      if (a.prodCity == \"\") {\n        setSearchId(null);\n      }\n\n      for (var i = 0; i < city.length; i++) {\n        if (a.prodCity.toLowerCase() == city[i]) {\n          setSearchId(a.city_id);\n        }\n      }\n    });\n    console.log(searchId);\n  }\n\n  var deleteCity = function deleteCity(id) {\n    setCityList(cityList.filter(function (a) {\n      return a.id !== id;\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", (_React$createElement4 = {\n    className: \"flex my-5\",\n    __self: this\n  }, _defineProperty(_React$createElement4, \"__self\", this), _defineProperty(_React$createElement4, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 7\n  }), _React$createElement4), /*#__PURE__*/React.createElement(\"input\", (_React$createElement = {\n    required: true,\n    title: \"helloCityName\",\n    ref: cityRef,\n    className: \"appearance-none min-w-0 w-full bg-white border border-black rounded-md py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs\",\n    placeholder: \"Enter a City Name\",\n    __self: this\n  }, _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }), _React$createElement)), /*#__PURE__*/React.createElement(\"div\", (_React$createElement3 = {\n    className: \"rounded-md sm:mt-0 sm:ml-3 sm:flex-shrink-0\",\n    __self: this\n  }, _defineProperty(_React$createElement3, \"__self\", this), _defineProperty(_React$createElement3, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }), _React$createElement3), /*#__PURE__*/React.createElement(\"button\", (_React$createElement2 = {\n    type: \"submit\",\n    onClick: handleClick,\n    className: \"w-28 bg-white-500 border border-black rounded-md py-2 px-4 flex items-center justify-center text-base font-medium text-black hover:bg-gray-100\",\n    __self: this\n  }, _defineProperty(_React$createElement2, \"__self\", this), _defineProperty(_React$createElement2, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 11\n  }), _React$createElement2), \"OK\"))), /*#__PURE__*/React.createElement(Zone2, (_React$createElement5 = {\n    cityList: cityList,\n    onDelete: deleteCity,\n    onSearch: handleSearch,\n    __self: this\n  }, _defineProperty(_React$createElement5, \"__self\", this), _defineProperty(_React$createElement5, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 7\n  }), _React$createElement5)), /*#__PURE__*/React.createElement(Zone3, (_React$createElement6 = {\n    id: searchId,\n    __self: this\n  }, _defineProperty(_React$createElement6, \"__self\", this), _defineProperty(_React$createElement6, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 7\n  }), _React$createElement6)), /*#__PURE__*/React.createElement(\"div\", (_React$createElement13 = {\n    className: \"flex-row mx-8\",\n    __self: this\n  }, _defineProperty(_React$createElement13, \"__self\", this), _defineProperty(_React$createElement13, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 7\n  }), _React$createElement13), /*#__PURE__*/React.createElement(Parse, (_React$createElement7 = {\n    expression: '10.50+2.30',\n    __self: this\n  }, _defineProperty(_React$createElement7, \"__self\", this), _defineProperty(_React$createElement7, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 7\n  }), _React$createElement7)), /*#__PURE__*/React.createElement(Parse, (_React$createElement8 = {\n    expression: '25,60-13,1',\n    __self: this\n  }, _defineProperty(_React$createElement8, \"__self\", this), _defineProperty(_React$createElement8, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 7\n  }), _React$createElement8)), /*#__PURE__*/React.createElement(Parse, (_React$createElement9 = {\n    expression: '5*2',\n    __self: this\n  }, _defineProperty(_React$createElement9, \"__self\", this), _defineProperty(_React$createElement9, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 7\n  }), _React$createElement9)), /*#__PURE__*/React.createElement(Parse, (_React$createElement10 = {\n    expression: '100/3',\n    __self: this\n  }, _defineProperty(_React$createElement10, \"__self\", this), _defineProperty(_React$createElement10, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 7\n  }), _React$createElement10)), /*#__PURE__*/React.createElement(Parse, (_React$createElement11 = {\n    expression: '2*5+10,65',\n    __self: this\n  }, _defineProperty(_React$createElement11, \"__self\", this), _defineProperty(_React$createElement11, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 7\n  }), _React$createElement11)), /*#__PURE__*/React.createElement(Parse, (_React$createElement12 = {\n    expression: '(10+5+2,75-3)*3',\n    __self: this\n  }, _defineProperty(_React$createElement12, \"__self\", this), _defineProperty(_React$createElement12, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 7\n  }), _React$createElement12))));\n}\n\nexport default Zone1;","map":{"version":3,"sources":["/Users/volpito/Desktop/projets/PALO_IT_test/palo_it_mrigot/app/javascript/components/Exo1/Zone1.js"],"names":["React","useRef","useState","useEffect","Zone2","uuid","Zone3","Parse","Zone1","cityRef","cityList","setCityList","searchId","setSearchId","products","setProducts","fetch","method","then","res","json","data","console","log","handleClick","cityName","current","value","toLowerCase","split","filter","a","map","i","prevCity","id","name","handleSearch","city","prodCity","length","city_id","deleteCity"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,KAAP,MAAkB,kEAAlB;;AAEA,SAASC,KAAT,GAAiB;AAAA;;AAEf,MAAMC,OAAO,GAAGR,MAAM,EAAtB;;AACA,kBAAgCC,QAAQ,CAAC,EAAD,CAAxC;AAAA;AAAA,MAAOQ,QAAP;AAAA,MAAiBC,WAAjB;;AACA,mBAAgCT,QAAQ,CAAC,EAAD,CAAxC;AAAA;AAAA,MAAOU,QAAP;AAAA,MAAiBC,WAAjB;;AACA,mBAAgCX,QAAQ,CAAC,EAAD,CAAxC;AAAA;AAAA,MAAOY,QAAP;AAAA,MAAiBC,WAAjB;;AAEAZ,EAAAA,SAAS,CAAC,YAAM;AACda,IAAAA,KAAK,cAAc;AACjBC,MAAAA,MAAM,EAAE;AADS,KAAd,CAAL,CAGCC,IAHD,CAGM,UAACC,GAAD,EAAS;AACb,aAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,KALD,EAMCF,IAND,CAMM,UAACG,IAAD,EAAU;AACdN,MAAAA,WAAW,CAACM,IAAI,CAACP,QAAN,CAAX;AACD,KARD,WASO,YAAY;AACjBQ,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACD,KAXD;AAaD,GAdQ,EAcN,EAdM,CAAT;;AAgBA,WAASC,WAAT,GAAuB;AACrB,QAAIC,QAAQ,GAAGhB,OAAO,CAACiB,OAAR,CAAgBC,KAA/B;AACA,QAAIF,QAAQ,KAAK,EAAjB,EAAqB;AACrBA,IAAAA,QAAQ,GAAGA,QAAQ,CAACG,WAAT,GAAuBC,KAAvB,CAA6B,GAA7B,CAAX;AACAJ,IAAAA,QAAQ,GAAGA,QAAQ,CAACK,MAAT,CAAgB,UAAAC,CAAC;AAAA,aAAIA,CAAC,IAAI,MAAL,IAAeA,CAAC,IAAI,OAApB,IAA+BA,CAAC,IAAI,WAApC,IAAmDA,CAAC,IAAI,UAAxD,IAAsEA,CAAC,IAAI,OAA/E;AAAA,KAAjB,CAAX;AACAN,IAAAA,QAAQ,GAAGA,QAAQ,CAACO,GAAT,CAAa,UAACD,CAAD,EAAIE,CAAJ,EAAU;AAChCtB,MAAAA,WAAW,CAAC,UAAAuB,QAAQ,EAAI;AACtB,4CAAWA,QAAX,IAAqB;AAACC,UAAAA,EAAE,EAAE;AAAC9B,YAAAA,IAAI,EAAJA;AAAD,WAAL;AAAa+B,UAAAA,IAAI,EAAEL;AAAnB,SAArB;AACD,OAFU,CAAX;AAGD,KAJU,CAAX;AAKAtB,IAAAA,OAAO,CAACiB,OAAR,CAAgBC,KAAhB,GAAwB,IAAxB;AACD;;AAED,WAASU,YAAT,CAAsBC,IAAtB,EAA4B;AAC1BxB,IAAAA,QAAQ,CAACgB,MAAT,CAAgB,UAACC,CAAD,EAAO;AACrB,UAAGA,CAAC,CAACQ,QAAF,IAAc,EAAjB,EAAoB;AAClB1B,QAAAA,WAAW,CAAC,IAAD,CAAX;AACD;;AACD,WAAI,IAAIoB,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACK,IAAI,CAACE,MAApB,EAA4BP,CAAC,EAA7B,EAAgC;AAC9B,YAAGF,CAAC,CAACQ,QAAF,CAAWX,WAAX,MAA4BU,IAAI,CAACL,CAAD,CAAnC,EAAuC;AACrCpB,UAAAA,WAAW,CAACkB,CAAC,CAACU,OAAH,CAAX;AACD;AACF;AACF,KATD;AAUAnB,IAAAA,OAAO,CAACC,GAAR,CAAYX,QAAZ;AACD;;AAED,MAAM8B,UAAU,GAAG,SAAbA,UAAa,CAACP,EAAD,EAAQ;AACzBxB,IAAAA,WAAW,CAACD,QAAQ,CAACoB,MAAT,CAAgB,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACI,EAAF,KAASA,EAAb;AAAA,KAAjB,CAAD,CAAX;AACD,GAFD;;AAIA,sBACE,uDACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACE;AACE,IAAA,QAAQ,MADV;AAEE,IAAA,KAAK,EAAC,eAFR;AAGE,IAAA,GAAG,EAAE1B,OAHP;AAIE,IAAA,SAAS,EAAC,yRAJZ;AAKE,IAAA,WAAW,EAAC,mBALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAQE;AAAK,IAAA,SAAS,EAAC,6CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,OAAO,EAAEe,WAFX;AAGE,IAAA,SAAS,EAAC,gJAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADF,CARF,CADF,eAmBE,oBAAC,KAAD;AAAO,IAAA,QAAQ,EAAEd,QAAjB;AAA2B,IAAA,QAAQ,EAAEgC,UAArC;AAAiD,IAAA,QAAQ,EAAEL,YAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAnBF,eAoBE,oBAAC,KAAD;AAAO,IAAA,EAAE,EAAEzB,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BApBF,eAqBE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CACA,oBAAC,KAAD;AAAO,IAAA,UAAU,EAAE,YAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADA,eAEA,oBAAC,KAAD;AAAO,IAAA,UAAU,EAAE,YAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAFA,eAGA,oBAAC,KAAD;AAAO,IAAA,UAAU,EAAE,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAHA,eAIA,oBAAC,KAAD;AAAO,IAAA,UAAU,EAAE,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAJA,eAKA,oBAAC,KAAD;AAAO,IAAA,UAAU,EAAE,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BALA,eAMA,oBAAC,KAAD;AAAO,IAAA,UAAU,EAAE,iBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BANA,CArBF,CADF;AAgCD;;AAED,eAAeJ,KAAf","sourcesContent":["import React, { useRef, useState, useEffect } from 'react'\nimport Zone2 from './Zone2'\nimport uuid from 'uuid/v4'\nimport Zone3 from '../Exo3/Zone3';\nimport Parse from '../TinyArythmeticExpressionParser/TinyArythmeticExpressionParser'\n\nfunction Zone1() {\n  \n  const cityRef = useRef()\n  const [cityList, setCityList] = useState([])\n  const [searchId, setSearchId] = useState([])\n  const [products, setProducts] = useState([]);\n\n  useEffect(() => {\n    fetch(`/products`, {\n      method: 'get',\n    })    \n    .then((res) => {\n      return res.json()\n    })\n    .then((data) => {\n      setProducts(data.products);\n    })\n    .catch(function () {\n      console.log(\"error fetch zone 1\");\n    });\n\n  }, []);\n\n  function handleClick() {\n    var cityName = cityRef.current.value\n    if (cityName === '') return\n    cityName = cityName.toLowerCase().split(' ')\n    cityName = cityName.filter(a => a == 'lyon' || a == 'paris' || a == 'marseille' || a == 'toulouse' || a == 'lille')\n    cityName = cityName.map((a, i) => {\n      setCityList(prevCity => {\n        return [...prevCity, {id: {uuid}, name: a}]\n      })\n    })\n    cityRef.current.value = null;\n  } \n\n  function handleSearch(city) {\n    products.filter((a) => {\n      if(a.prodCity == \"\"){\n        setSearchId(null)\n      }\n      for(var i=0; i<city.length; i++){\n        if(a.prodCity.toLowerCase() == city[i]){\n          setSearchId(a.city_id)\n        }        \n      }\n    })\n    console.log(searchId)\n  }\n\n  const deleteCity = (id) => {\n    setCityList(cityList.filter(a => a.id !== id))\n  }\n\n  return (\n    <>\n      <div className='flex my-5'>\n        <input\n          required\n          title='helloCityName'\n          ref={cityRef}\n          className=\"appearance-none min-w-0 w-full bg-white border border-black rounded-md py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs\"\n          placeholder=\"Enter a City Name\"\n        />\n        <div className=\"rounded-md sm:mt-0 sm:ml-3 sm:flex-shrink-0\">\n          <button\n            type=\"submit\"\n            onClick={handleClick}\n            className=\"w-28 bg-white-500 border border-black rounded-md py-2 px-4 flex items-center justify-center text-base font-medium text-black hover:bg-gray-100\"\n          >\n            OK\n          </button> \n        </div>   \n      </div>\n      <Zone2 cityList={cityList} onDelete={deleteCity} onSearch={handleSearch}/>\n      <Zone3 id={searchId}/>\n      <div className=\"flex-row mx-8\">\n      <Parse expression={'10.50+2.30'}/>\n      <Parse expression={'25,60-13,1'}/>\n      <Parse expression={'5*2'}/>\n      <Parse expression={'100/3'}/>\n      <Parse expression={'2*5+10,65'}/>\n      <Parse expression={'(10+5+2,75-3)*3'}/>\n      </div>\n    </>\n  )\n}\n\nexport default Zone1\n"]},"metadata":{},"sourceType":"module"}