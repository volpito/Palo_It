{"ast":null,"code":"var _jsxFileName = \"/Users/volpito/Desktop/projets/PALO_IT_test/palo_it_mrigot/app/javascript/components/Exo1/Zone1.js\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport Zone2 from './Zone2';\nimport uuid from 'uuid/v4';\nimport Zone3 from '../Exo3/Zone3';\nimport FetchCity from '../Exo3/FetchCity';\n\nfunction Zone1() {\n  var cityRef = useRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      cityList = _useState2[0],\n      setCityList = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchId = _useState4[0],\n      setSearchId = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      products = _useState6[0],\n      setProducts = _useState6[1];\n\n  useEffect(function () {\n    fetch(\"/products\", {\n      method: 'get'\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      setProducts(data.products);\n    })[\"catch\"](function () {\n      console.log(\"error fetch zone 1\");\n    });\n  }, []);\n\n  function handleClick() {\n    var cityName = cityRef.current.value;\n    if (cityName === '') return;\n    cityName = cityName.toLowerCase().split(' ');\n    cityName = cityName.filter(function (a) {\n      return a == 'lyon' || a == 'paris' || a == 'marseille' || a == 'toulouse' || a == 'lille';\n    });\n    cityName = cityName.map(function (a, i) {\n      setCityList(function (prevCity) {\n        return [].concat(_toConsumableArray(prevCity), [{\n          id: {\n            uuid: uuid\n          },\n          name: a\n        }]);\n      });\n    });\n    cityRef.current.value = null;\n  }\n\n  function handleSearch(city) {\n    products.filter(function (a) {\n      if (a.prodCity == \"\") {\n        setSearchId(null);\n      }\n\n      for (var i = 0; i < city.length; i++) {\n        if (a.prodCity.toLowerCase() == city[i]) {\n          setSearchId(function (prevId) {\n            return [].concat(_toConsumableArray(prevId), [a.city_id]);\n          });\n        }\n      }\n    });\n    console.log(searchId);\n  }\n\n  var deleteCity = function deleteCity(id) {\n    setCityList(cityList.filter(function (a) {\n      return a.id !== id;\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex my-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    ref: cityRef,\n    className: \"appearance-none min-w-0 w-full bg-white border border-black rounded-md py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs\",\n    placeholder: \"Enter a City Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rounded-md sm:mt-0 sm:ml-3 sm:flex-shrink-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleClick,\n    className: \"w-28 bg-white-500 border border-black rounded-md py-2 px-4 flex items-center justify-center text-base font-medium text-black hover:bg-gray-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, \"OK\"))), /*#__PURE__*/React.createElement(Zone2, {\n    cityList: cityList,\n    onDelete: deleteCity,\n    onSearch: handleSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Zone3, {\n    id: searchId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default Zone1;","map":{"version":3,"sources":["/Users/volpito/Desktop/projets/PALO_IT_test/palo_it_mrigot/app/javascript/components/Exo1/Zone1.js"],"names":["React","useRef","useState","useEffect","Zone2","uuid","Zone3","FetchCity","Zone1","cityRef","cityList","setCityList","searchId","setSearchId","products","setProducts","fetch","method","then","res","json","data","console","log","handleClick","cityName","current","value","toLowerCase","split","filter","a","map","i","prevCity","id","name","handleSearch","city","prodCity","length","prevId","city_id","deleteCity"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from 'react'\nimport Zone2 from './Zone2'\nimport uuid from 'uuid/v4'\nimport Zone3 from '../Exo3/Zone3';\nimport FetchCity from '../Exo3/FetchCity';\n\nfunction Zone1() {\n  \n  const cityRef = useRef()\n  const [cityList, setCityList] = useState([])\n  const [searchId, setSearchId] = useState([])\n  const [products, setProducts] = useState([]);\n\n  useEffect(() => {\n    fetch(`/products`, {\n      method: 'get',\n    })    \n    .then((res) => {\n      return res.json()\n    })\n    .then((data) => {\n      setProducts(data.products);\n    })\n    .catch(function () {\n      console.log(\"error fetch zone 1\");\n    });\n\n  }, []);\n\n  function handleClick() {\n    var cityName = cityRef.current.value\n    if (cityName === '') return\n    cityName = cityName.toLowerCase().split(' ')\n    cityName = cityName.filter(a => a == 'lyon' || a == 'paris' || a == 'marseille' || a == 'toulouse' || a == 'lille')\n    cityName = cityName.map((a, i) => {\n      setCityList(prevCity => {\n        return [...prevCity, {id: {uuid}, name: a}]\n      })\n    })\n\n    cityRef.current.value = null;\n  } \n\n  function handleSearch(city) {\n    products.filter((a) => {\n      if(a.prodCity == \"\"){\n        setSearchId(null)\n      }\n      for(var i=0; i<city.length; i++){\n        if(a.prodCity.toLowerCase() == city[i]){\n          setSearchId(prevId => {\n            return[...prevId, a.city_id]\n          })\n        }        \n      }\n    })\n    console.log(searchId)\n  }\n\n  const deleteCity = (id) => {\n    setCityList(cityList.filter(a => a.id !== id))\n  }\n\n  return (\n    <>\n      <div className='flex my-5'>\n        <input\n          required\n          ref={cityRef}\n          className=\"appearance-none min-w-0 w-full bg-white border border-black rounded-md py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs\"\n          placeholder=\"Enter a City Name\"\n        />\n        <div className=\"rounded-md sm:mt-0 sm:ml-3 sm:flex-shrink-0\">\n          <button\n            type=\"submit\"\n            onClick={handleClick}\n            className=\"w-28 bg-white-500 border border-black rounded-md py-2 px-4 flex items-center justify-center text-base font-medium text-black hover:bg-gray-100\"\n          >\n            OK\n          </button> \n        </div>   \n      </div>\n      <Zone2 cityList={cityList} onDelete={deleteCity} onSearch={handleSearch}/>\n      <Zone3 id={searchId}/>\n    </>\n  )\n}\n\nexport default Zone1\n"]},"metadata":{},"sourceType":"module"}